# EVENT-REWARD-SYSTEM
# 이벤트 보상 시스템 (NestJS + MSA + MongoDB)

## 프로젝트 개요

NestJS 기반 마이크로서비스 아키텍처(MSA)로 설계된 **이벤트 보상 시스템**입니다.  
유저는 다양한 이벤트에 참여하고, 조건을 만족하면 보상을 요청할 수 있으며, 관리자 및 감사자는 보상 요청 내역을 조회할 수 있습니다.

---

## 기술 스택

| 항목          | 도구/버전                |
|---------------|---------------------------|
| 언어           | TypeScript               |
| 런타임         | Node.js 18 (고정)         |
| 프레임워크     | NestJS (11.0.7)        |
| 인증 방식      | JWT                      |
| DB            | MongoDB                  |
| 배포/실행 도구 | Docker + docker-compose |
| 개발 환경      | Windows + VSCode         |
| 실행 환경      | Docker (Linux 기반 컨테이너) |

---

## 시스템 구성

서비스는 총 3개의 NestJS 서버로 구성됩니다.

### Gateway Server
- 모든 API 요청의 진입점
- JWT 인증 및 권한(Role) 검증
- API 요청을 해당 서비스로 프록시 라우팅

### Auth Server
- 유저 정보 및 역할 관리 (USER, OPERATOR, AUDITOR, ADMIN)
- 로그인 및 JWT 발급
- 역할별 권한 구분

### Event Server
- 이벤트 생성 및 보상 등록
- 유저 보상 요청 처리 및 검증
- 보상 지급 상태 저장 및 조회

---

## 기능 상세

### Gateway Server
- 모든 클라이언트 요청을 수신하고, 해당 마이크로서비스로 프록시 라우팅 처리합니다.
- JWT 토큰의 유효성을 검사하고, 사용자 역할(Role)에 따라 접근을 제어합니다.

### Auth Server
- 유저 회원가입 및 로그인 기능을 제공합니다.  
- JWT 토큰을 생성하고, 인증 관련 기능을 처리합니다.  
- 유저의 역할(Role)을 등록하고 관리할 수 있습니다.  

####  역할별 권한

| 역할(Role) | 권한 설명                          |
|------------|------------------------------------|
| USER       | 보상 요청 가능                     |
| OPERATOR   | 이벤트 및 보상 등록 가능           |
| AUDITOR    | 보상 요청 이력 조회만 가능         |
| ADMIN      | 모든 기능에 접근 가능              |

### Event Server

1. **이벤트 등록 / 조회 / 수정**
   - 운영자 또는 관리자는 이벤트를 등록, 조회, 수정할 수 있습니다.
   - 이벤트 등록 시 다음 정보를 입력합니다.
     - 이벤트 이름
     - 조건 (예: 로그인 3일 연속, 친구 1명 초대)
     - 시작일, 종료일
     - 상태 (활성, 비활성)
   - 등록된 이벤트는 아래 기능을 제공합니다.
     - 목록 조회: 이벤트 이름, 조건, 기간, 상태 확인
     - 상세 조회: 이벤트 정보 및 연결된 보상 정보 확인
     - 수정: 조건, 기간, 상태 변경 가능

2. **보상 등록 / 조회 / 수정**
   - 이벤트마다 하나 이상의 보상 정보를 등록할 수 있습니다.
   - 보상 등록 시 다음 정보를 입력합니다.
     - 보상 유형 (포인트, 아이템, 쿠폰)
     - 보상 이름 및 설명
     - 수량
     - 연결된 이벤트 ID
   - 등록된 보상은 조회 및 수정할 수 있습니다.
     - 조회: 보상 목록 및 필터링 기능(이벤트별, 상태별 등) 조회 가능
     - 수정: 보상 이름, 설명, 수량, 보상 유형 변경 가능

3. **유저 보상 요청**
   - 유저는 이벤트 참여 후 해당 이벤트에 대한 보상을 요청할 수 있습니다.
   - 시스템은 다음을 검증합니다.
     - 유저가 해당 이벤트 조건을 만족하는지 여부
     - 동일 이벤트에 대해 이미 보상을 요청했는지 여부
   - 조건을 만족하고 중복이 아닌 경우 보상이 지급됩니다.
   - 요청 결과는 다음과 같이 기록됩니다.
     - 성공
     - 실패 (조건 불충족 또는 중복 요청)

4. **보상 요청 내역 확인**
   - 유저는 본인의 보상 요청 이력을 확인할 수 있습니다.
     - 요청한 이벤트, 요청 결과, 요청 시간 정보 포함
   - 운영자, 감사자, 관리자는 전체 유저의 요청 내역을 조회할 수 있습니다.
     - 필터링 기능 제공: 이벤트별, 요청 상태별 기준으로 조회 가능

---

